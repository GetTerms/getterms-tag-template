___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_NGMP4",
  "version": 1.2,
  "displayName": "GetTerms CMP",
  "categories": [
    "TAG_MANAGEMENT",
    "UTILITY"
  ],
  "brand": {
    "id": "github.com_GetTerms",
    "displayName": "GetTerms",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "Enables Google consent mode integration with the GetTerms Consent Management Platform.",
  "containerContexts": [
    "WEB"
  ],
  "securityGroups": []
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "GROUP",
    "name": "optional_settings",
    "displayName": "Optional Settings",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "control_consent_banner_gtm",
        "checkboxText": "Manage the GetTerms consent banner with GTM rather than your dashboard (read tooltip)",
        "simpleValueType": true,
        "help": "\u003cstrong\u003eThis is not required if you have embedded our banner in the header of your website.\u003c/strong\u003e\n\u003cbr\u003e\nThis will override many of the settings you have configured in the GetTerms dashboard. Only enable this if you wish to manage Google Consent Mode behavior or install the consent banner entirely with GTM."
      },
      {
        "type": "GROUP",
        "name": "widget_installation",
        "displayName": "Consent Banner Installation",
        "groupStyle": "NO_ZIPPY",
        "subParams": [
          {
            "type": "CHECKBOX",
            "name": "install_widget_gtm",
            "checkboxText": "Install the GetTerms consent banner via this GTM tag (read tooltip)",
            "simpleValueType": true,
            "help": "\u003cstrong\u003eWarning: This installation method reduces script blocking reliability.\u003c/strong\u003e\u003cbr\u003eWe recommend direct installation in your website header unless all your cookie scripts are installed and managed with GTM.",
            "enablingConditions": [
              {
                "paramName": "control_consent_banner_gtm",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          },
          {
            "type": "GROUP",
            "name": "gtm_widget_settings",
            "groupStyle": "NO_ZIPPY",
            "subParams": [
              {
                "type": "TEXT",
                "name": "widgetSlug",
                "displayName": "GetTerms ID",
                "simpleValueType": true,
                "valueHint": "e.g. 12abc345-d6ef-7891-g2h3",
                "help": ""
              },
              {
                "type": "SELECT",
                "name": "defaultLanguage",
                "displayName": "Default consent banner language",
                "macrosInSelect": false,
                "selectItems": [
                  {
                    "value": "en-us",
                    "displayValue": "English US"
                  },
                  {
                    "value": "en-au",
                    "displayValue": "English UK"
                  },
                  {
                    "value": "de",
                    "displayValue": "German"
                  },
                  {
                    "value": "fr",
                    "displayValue": "French"
                  },
                  {
                    "value": "it",
                    "displayValue": "Italian"
                  },
                  {
                    "value": "es",
                    "displayValue": "Spanish"
                  },
                  {
                    "value": "hi-in",
                    "displayValue": "Hindi"
                  }
                ],
                "simpleValueType": true,
                "defaultValue": "en-us"
              },
              {
                "type": "CHECKBOX",
                "name": "autoLang",
                "checkboxText": "Enable auto-language detection",
                "simpleValueType": true,
                "help": "If enabled, GetTerms CMP widget will attempt to match the users preferred language to one of our available options."
              }
            ],
            "enablingConditions": [
              {
                "paramName": "install_widget_gtm",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          }
        ],
        "enablingConditions": [
          {
            "paramName": "control_consent_banner_gtm",
            "paramValue": true,
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "GROUP",
        "name": "consent_mode_settings",
        "displayName": "Per Region Consent Mode Settings",
        "groupStyle": "NO_ZIPPY",
        "subParams": [
          {
            "type": "GROUP",
            "name": "default_consent_state_overrides",
            "displayName": "",
            "groupStyle": "NO_ZIPPY",
            "subParams": [
              {
                "type": "CHECKBOX",
                "name": "gdpr_overide_default_consent_settings",
                "checkboxText": "Set default consent behavior for GDPR region",
                "simpleValueType": true
              },
              {
                "type": "CHECKBOX",
                "name": "country_overide_default_consent_settings",
                "checkboxText": "Set default consent behavior for specific countries",
                "simpleValueType": true
              },
              {
                "type": "GROUP",
                "name": "gdpr_default_consent_settings",
                "groupStyle": "NO_ZIPPY",
                "subParams": [
                  {
                    "type": "SELECT",
                    "name": "gdpr_ad_storage",
                    "displayName": "ad_user_data",
                    "macrosInSelect": false,
                    "selectItems": [
                      {
                        "value": "denied",
                        "displayValue": "Denied"
                      },
                      {
                        "value": "granted",
                        "displayValue": "Granted"
                      }
                    ],
                    "simpleValueType": true,
                    "defaultValue": "denied",
                    "help": "Maps to \"Advertising\" checkbox in GetTerms Cookie Widget"
                  },
                  {
                    "type": "SELECT",
                    "name": "gdpr_ad_user_data",
                    "displayName": "ad_user_data",
                    "macrosInSelect": false,
                    "selectItems": [
                      {
                        "value": "denied",
                        "displayValue": "Denied"
                      },
                      {
                        "value": "granted",
                        "displayValue": "Granted"
                      }
                    ],
                    "simpleValueType": true,
                    "defaultValue": "denied",
                    "help": "Maps to \"Advertising\" checkbox in GetTerms Cookie Widget"
                  },
                  {
                    "type": "SELECT",
                    "name": "gdpr_ad_personalization",
                    "displayName": "ad_personalization",
                    "macrosInSelect": false,
                    "selectItems": [
                      {
                        "value": "denied",
                        "displayValue": "Denied"
                      },
                      {
                        "value": "granted",
                        "displayValue": "Granted"
                      }
                    ],
                    "simpleValueType": true,
                    "defaultValue": "denied",
                    "help": "Maps to \"Advertising\" checkbox in GetTerms Cookie Widget"
                  },
                  {
                    "type": "SELECT",
                    "name": "gdpr_analytics_storage",
                    "displayName": "analytics_storage",
                    "macrosInSelect": false,
                    "selectItems": [
                      {
                        "value": "denied",
                        "displayValue": "Denied"
                      },
                      {
                        "value": "granted",
                        "displayValue": "Granted"
                      }
                    ],
                    "simpleValueType": true,
                    "defaultValue": "denied",
                    "help": "Maps to \"Performance\" checkbox in GetTerms Cookie Widget"
                  },
                  {
                    "type": "SELECT",
                    "name": "gdpr_functionality_storage",
                    "displayName": "functionality_storage",
                    "macrosInSelect": false,
                    "selectItems": [
                      {
                        "value": "denied",
                        "displayValue": "Denied"
                      },
                      {
                        "value": "granted",
                        "displayValue": "Granted"
                      }
                    ],
                    "simpleValueType": true,
                    "defaultValue": "denied",
                    "help": "Maps to \"Functional\" checkbox in GetTerms Cookie Widget"
                  },
                  {
                    "type": "SELECT",
                    "name": "gdpr_personalization_storage",
                    "displayName": "personalization_storage",
                    "macrosInSelect": false,
                    "selectItems": [
                      {
                        "value": "denied",
                        "displayValue": "Denied"
                      },
                      {
                        "value": "granted",
                        "displayValue": "Granted"
                      }
                    ],
                    "simpleValueType": true,
                    "defaultValue": "denied",
                    "help": "Maps to \"Functional\" checkbox in GetTerms Cookie Widget"
                  }
                ],
                "displayName": "Default consent state for entire GDPR region",
                "enablingConditions": [
                  {
                    "paramName": "gdpr_overide_default_consent_settings",
                    "paramValue": true,
                    "type": "EQUALS"
                  }
                ],
                "help": "Use these settings to configure the consent defaults for the entire GDPR region / EEA , simply choose the default state for each storage type. For GDPR compliance, this should always be denied (the default setting)."
              },
              {
                "type": "GROUP",
                "name": "country_default_consent_settings_group",
                "displayName": "Country specific default consent state settings",
                "groupStyle": "NO_ZIPPY",
                "subParams": [
                  {
                    "type": "PARAM_TABLE",
                    "name": "country_default_consent_settings",
                    "paramTableColumns": [
                      {
                        "param": {
                          "type": "SELECT",
                          "name": "country_region",
                          "displayName": "Country",
                          "macrosInSelect": false,
                          "selectItems": [
                            {
                              "value": "AF",
                              "displayValue": "AFGHANISTAN"
                            },
                            {
                              "value": "AX",
                              "displayValue": "ÅLAND ISLANDS"
                            },
                            {
                              "value": "AL",
                              "displayValue": "ALBANIA"
                            },
                            {
                              "value": "DZ",
                              "displayValue": "ALGERIA"
                            },
                            {
                              "value": "AS",
                              "displayValue": "AMERICAN SAMOA"
                            },
                            {
                              "value": "AD",
                              "displayValue": "ANDORRA"
                            },
                            {
                              "value": "AO",
                              "displayValue": "ANGOLA"
                            },
                            {
                              "value": "AI",
                              "displayValue": "ANGUILLA"
                            },
                            {
                              "value": "AQ",
                              "displayValue": "ANTARCTICA"
                            },
                            {
                              "value": "AG",
                              "displayValue": "ANTIGUA AND BARBUDA"
                            },
                            {
                              "value": "AR",
                              "displayValue": "ARGENTINA"
                            },
                            {
                              "value": "AM",
                              "displayValue": "ARMENIA"
                            },
                            {
                              "value": "AW",
                              "displayValue": "ARUBA"
                            },
                            {
                              "value": "AU",
                              "displayValue": "AUSTRALIA"
                            },
                            {
                              "value": "AT",
                              "displayValue": "AUSTRIA"
                            },
                            {
                              "value": "AZ",
                              "displayValue": "AZERBAIJAN"
                            },
                            {
                              "value": "BS",
                              "displayValue": "BAHAMAS"
                            },
                            {
                              "value": "BH",
                              "displayValue": "BAHRAIN"
                            },
                            {
                              "value": "BD",
                              "displayValue": "BANGLADESH"
                            },
                            {
                              "value": "BB",
                              "displayValue": "BARBADOS"
                            },
                            {
                              "value": "BY",
                              "displayValue": "BELARUS"
                            },
                            {
                              "value": "BE",
                              "displayValue": "BELGIUM"
                            },
                            {
                              "value": "BZ",
                              "displayValue": "BELIZE"
                            },
                            {
                              "value": "BJ",
                              "displayValue": "BENIN"
                            },
                            {
                              "value": "BM",
                              "displayValue": "BERMUDA"
                            },
                            {
                              "value": "BT",
                              "displayValue": "BHUTAN"
                            },
                            {
                              "value": "BO",
                              "displayValue": "BOLIVIA, PLURINATIONAL STATE OF"
                            },
                            {
                              "value": "BQ",
                              "displayValue": "BONAIRE, SINT EUSTATIUS AND SABA"
                            },
                            {
                              "value": "BA",
                              "displayValue": "BOSNIA AND HERZEGOVINA"
                            },
                            {
                              "value": "BW",
                              "displayValue": "BOTSWANA"
                            },
                            {
                              "value": "BV",
                              "displayValue": "BOUVET ISLAND"
                            },
                            {
                              "value": "BR",
                              "displayValue": "BRAZIL"
                            },
                            {
                              "value": "IO",
                              "displayValue": "BRITISH INDIAN OCEAN TERRITORY"
                            },
                            {
                              "value": "BN",
                              "displayValue": "BRUNEI DARUSSALAM"
                            },
                            {
                              "value": "BG",
                              "displayValue": "BULGARIA"
                            },
                            {
                              "value": "BF",
                              "displayValue": "BURKINA FASO"
                            },
                            {
                              "value": "BI",
                              "displayValue": "BURUNDI"
                            },
                            {
                              "value": "KH",
                              "displayValue": "CAMBODIA"
                            },
                            {
                              "value": "CM",
                              "displayValue": "CAMEROON"
                            },
                            {
                              "value": "CA",
                              "displayValue": "CANADA"
                            },
                            {
                              "value": "CV",
                              "displayValue": "CAPE VERDE"
                            },
                            {
                              "value": "KY",
                              "displayValue": "CAYMAN ISLANDS"
                            },
                            {
                              "value": "CF",
                              "displayValue": "CENTRAL AFRICAN REPUBLIC"
                            },
                            {
                              "value": "TD",
                              "displayValue": "CHAD"
                            },
                            {
                              "value": "CL",
                              "displayValue": "CHILE"
                            },
                            {
                              "value": "CN",
                              "displayValue": "CHINA"
                            },
                            {
                              "value": "CX",
                              "displayValue": "CHRISTMAS ISLAND"
                            },
                            {
                              "value": "CC",
                              "displayValue": "COCOS (KEELING) ISLANDS"
                            },
                            {
                              "value": "CO",
                              "displayValue": "COLOMBIA"
                            },
                            {
                              "value": "KM",
                              "displayValue": "COMOROS"
                            },
                            {
                              "value": "CG",
                              "displayValue": "CONGO"
                            },
                            {
                              "value": "CD",
                              "displayValue": "CONGO, THE DEMOCRATIC REPUBLIC OF THE"
                            },
                            {
                              "value": "CK",
                              "displayValue": "COOK ISLANDS"
                            },
                            {
                              "value": "CR",
                              "displayValue": "COSTA RICA"
                            },
                            {
                              "value": "CI",
                              "displayValue": "CÔTE D\u0027IVOIRE"
                            },
                            {
                              "value": "HR",
                              "displayValue": "CROATIA"
                            },
                            {
                              "value": "CU",
                              "displayValue": "CUBA"
                            },
                            {
                              "value": "CW",
                              "displayValue": "CURAÇAO"
                            },
                            {
                              "value": "CY",
                              "displayValue": "CYPRUS"
                            },
                            {
                              "value": "CZ",
                              "displayValue": "CZECH REPUBLIC"
                            },
                            {
                              "value": "DK",
                              "displayValue": "DENMARK"
                            },
                            {
                              "value": "DJ",
                              "displayValue": "DJIBOUTI"
                            },
                            {
                              "value": "DM",
                              "displayValue": "DOMINICA"
                            },
                            {
                              "value": "DO",
                              "displayValue": "DOMINICAN REPUBLIC"
                            },
                            {
                              "value": "EC",
                              "displayValue": "ECUADOR"
                            },
                            {
                              "value": "EG",
                              "displayValue": "EGYPT"
                            },
                            {
                              "value": "SV",
                              "displayValue": "EL SALVADOR"
                            },
                            {
                              "value": "GQ",
                              "displayValue": "EQUATORIAL GUINEA"
                            },
                            {
                              "value": "ER",
                              "displayValue": "ERITREA"
                            },
                            {
                              "value": "EE",
                              "displayValue": "ESTONIA"
                            },
                            {
                              "value": "ET",
                              "displayValue": "ETHIOPIA"
                            },
                            {
                              "value": "FK",
                              "displayValue": "FALKLAND ISLANDS (MALVINAS)"
                            },
                            {
                              "value": "FO",
                              "displayValue": "FAROE ISLANDS"
                            },
                            {
                              "value": "FJ",
                              "displayValue": "FIJI"
                            },
                            {
                              "value": "FI",
                              "displayValue": "FINLAND"
                            },
                            {
                              "value": "FR",
                              "displayValue": "FRANCE"
                            },
                            {
                              "value": "GF",
                              "displayValue": "FRENCH GUIANA"
                            },
                            {
                              "value": "PF",
                              "displayValue": "FRENCH POLYNESIA"
                            },
                            {
                              "value": "TF",
                              "displayValue": "FRENCH SOUTHERN TERRITORIES"
                            },
                            {
                              "value": "GA",
                              "displayValue": "GABON"
                            },
                            {
                              "value": "GM",
                              "displayValue": "GAMBIA"
                            },
                            {
                              "value": "GE",
                              "displayValue": "GEORGIA"
                            },
                            {
                              "value": "DE",
                              "displayValue": "GERMANY"
                            },
                            {
                              "value": "GH",
                              "displayValue": "GHANA"
                            },
                            {
                              "value": "GI",
                              "displayValue": "GIBRALTAR"
                            },
                            {
                              "value": "GR",
                              "displayValue": "GREECE"
                            },
                            {
                              "value": "GL",
                              "displayValue": "GREENLAND"
                            },
                            {
                              "value": "GD",
                              "displayValue": "GRENADA"
                            },
                            {
                              "value": "GP",
                              "displayValue": "GUADELOUPE"
                            },
                            {
                              "value": "GU",
                              "displayValue": "GUAM"
                            },
                            {
                              "value": "GT",
                              "displayValue": "GUATEMALA"
                            },
                            {
                              "value": "GG",
                              "displayValue": "GUERNSEY"
                            },
                            {
                              "value": "GN",
                              "displayValue": "GUINEA"
                            },
                            {
                              "value": "GW",
                              "displayValue": "GUINEA-BISSAU"
                            },
                            {
                              "value": "GY",
                              "displayValue": "GUYANA"
                            },
                            {
                              "value": "HT",
                              "displayValue": "HAITI"
                            },
                            {
                              "value": "HM",
                              "displayValue": "HEARD ISLAND AND MCDONALD ISLANDS"
                            },
                            {
                              "value": "VA",
                              "displayValue": "HOLY SEE (VATICAN CITY STATE)"
                            },
                            {
                              "value": "HN",
                              "displayValue": "HONDURAS"
                            },
                            {
                              "value": "HK",
                              "displayValue": "HONG KONG"
                            },
                            {
                              "value": "HU",
                              "displayValue": "HUNGARY"
                            },
                            {
                              "value": "IS",
                              "displayValue": "ICELAND"
                            },
                            {
                              "value": "IN",
                              "displayValue": "INDIA"
                            },
                            {
                              "value": "ID",
                              "displayValue": "INDONESIA"
                            },
                            {
                              "value": "IR",
                              "displayValue": "IRAN, ISLAMIC REPUBLIC OF"
                            },
                            {
                              "value": "IQ",
                              "displayValue": "IRAQ"
                            },
                            {
                              "value": "IE",
                              "displayValue": "IRELAND"
                            },
                            {
                              "value": "IM",
                              "displayValue": "ISLE OF MAN"
                            },
                            {
                              "value": "IL",
                              "displayValue": "ISRAEL"
                            },
                            {
                              "value": "IT",
                              "displayValue": "ITALY"
                            },
                            {
                              "value": "JM",
                              "displayValue": "JAMAICA"
                            },
                            {
                              "value": "JP",
                              "displayValue": "JAPAN"
                            },
                            {
                              "value": "JE",
                              "displayValue": "JERSEY"
                            },
                            {
                              "value": "JO",
                              "displayValue": "JORDAN"
                            },
                            {
                              "value": "KZ",
                              "displayValue": "KAZAKHSTAN"
                            },
                            {
                              "value": "KE",
                              "displayValue": "KENYA"
                            },
                            {
                              "value": "KI",
                              "displayValue": "KIRIBATI"
                            },
                            {
                              "value": "KP",
                              "displayValue": "KOREA, DEMOCRATIC PEOPLE\u0027S REPUBLIC OF"
                            },
                            {
                              "value": "KR",
                              "displayValue": "KOREA, REPUBLIC OF"
                            },
                            {
                              "value": "KW",
                              "displayValue": "KUWAIT"
                            },
                            {
                              "value": "KG",
                              "displayValue": "KYRGYZSTAN"
                            },
                            {
                              "value": "LA",
                              "displayValue": "LAO PEOPLE\u0027S DEMOCRATIC REPUBLIC"
                            },
                            {
                              "value": "LV",
                              "displayValue": "LATVIA"
                            },
                            {
                              "value": "LB",
                              "displayValue": "LEBANON"
                            },
                            {
                              "value": "LS",
                              "displayValue": "LESOTHO"
                            },
                            {
                              "value": "LR",
                              "displayValue": "LIBERIA"
                            },
                            {
                              "value": "LY",
                              "displayValue": "LIBYA"
                            },
                            {
                              "value": "LI",
                              "displayValue": "LIECHTENSTEIN"
                            },
                            {
                              "value": "LT",
                              "displayValue": "LITHUANIA"
                            },
                            {
                              "value": "LU",
                              "displayValue": "LUXEMBOURG"
                            },
                            {
                              "value": "MO",
                              "displayValue": "MACAO"
                            },
                            {
                              "value": "MK",
                              "displayValue": "MACEDONIA, THE FORMER YUGOSLAV REPUBLIC OF"
                            },
                            {
                              "value": "MG",
                              "displayValue": "MADAGASCAR"
                            },
                            {
                              "value": "MW",
                              "displayValue": "MALAWI"
                            },
                            {
                              "value": "MY",
                              "displayValue": "MALAYSIA"
                            },
                            {
                              "value": "MV",
                              "displayValue": "MALDIVES"
                            },
                            {
                              "value": "ML",
                              "displayValue": "MALI"
                            },
                            {
                              "value": "MT",
                              "displayValue": "MALTA"
                            },
                            {
                              "value": "MH",
                              "displayValue": "MARSHALL ISLANDS"
                            },
                            {
                              "value": "MQ",
                              "displayValue": "MARTINIQUE"
                            },
                            {
                              "value": "MR",
                              "displayValue": "MAURITANIA"
                            },
                            {
                              "value": "MU",
                              "displayValue": "MAURITIUS"
                            },
                            {
                              "value": "YT",
                              "displayValue": "MAYOTTE"
                            },
                            {
                              "value": "MX",
                              "displayValue": "MEXICO"
                            },
                            {
                              "value": "FM",
                              "displayValue": "MICRONESIA, FEDERATED STATES OF"
                            },
                            {
                              "value": "MD",
                              "displayValue": "MOLDOVA, REPUBLIC OF"
                            },
                            {
                              "value": "MC",
                              "displayValue": "MONACO"
                            },
                            {
                              "value": "MN",
                              "displayValue": "MONGOLIA"
                            },
                            {
                              "value": "ME",
                              "displayValue": "MONTENEGRO"
                            },
                            {
                              "value": "MS",
                              "displayValue": "MONTSERRAT"
                            },
                            {
                              "value": "MA",
                              "displayValue": "MOROCCO"
                            },
                            {
                              "value": "MZ",
                              "displayValue": "MOZAMBIQUE"
                            },
                            {
                              "value": "MM",
                              "displayValue": "MYANMAR"
                            },
                            {
                              "value": "NA",
                              "displayValue": "NAMIBIA"
                            },
                            {
                              "value": "NR",
                              "displayValue": "NAURU"
                            },
                            {
                              "value": "NP",
                              "displayValue": "NEPAL"
                            },
                            {
                              "value": "NL",
                              "displayValue": "NETHERLANDS"
                            },
                            {
                              "value": "NC",
                              "displayValue": "NEW CALEDONIA"
                            },
                            {
                              "value": "NZ",
                              "displayValue": "NEW ZEALAND"
                            },
                            {
                              "value": "NI",
                              "displayValue": "NICARAGUA"
                            },
                            {
                              "value": "NE",
                              "displayValue": "NIGER"
                            },
                            {
                              "value": "NG",
                              "displayValue": "NIGERIA"
                            },
                            {
                              "value": "NU",
                              "displayValue": "NIUE"
                            },
                            {
                              "value": "NF",
                              "displayValue": "NORFOLK ISLAND"
                            },
                            {
                              "value": "MP",
                              "displayValue": "NORTHERN MARIANA ISLANDS"
                            },
                            {
                              "value": "NO",
                              "displayValue": "NORWAY"
                            },
                            {
                              "value": "OM",
                              "displayValue": "OMAN"
                            },
                            {
                              "value": "PK",
                              "displayValue": "PAKISTAN"
                            },
                            {
                              "value": "PW",
                              "displayValue": "PALAU"
                            },
                            {
                              "value": "PS",
                              "displayValue": "PALESTINE, STATE OF"
                            },
                            {
                              "value": "PA",
                              "displayValue": "PANAMA"
                            },
                            {
                              "value": "PG",
                              "displayValue": "PAPUA NEW GUINEA"
                            },
                            {
                              "value": "PY",
                              "displayValue": "PARAGUAY"
                            },
                            {
                              "value": "PE",
                              "displayValue": "PERU"
                            },
                            {
                              "value": "PH",
                              "displayValue": "PHILIPPINES"
                            },
                            {
                              "value": "PN",
                              "displayValue": "PITCAIRN"
                            },
                            {
                              "value": "PL",
                              "displayValue": "POLAND"
                            },
                            {
                              "value": "PT",
                              "displayValue": "PORTUGAL"
                            },
                            {
                              "value": "PR",
                              "displayValue": "PUERTO RICO"
                            },
                            {
                              "value": "QA",
                              "displayValue": "QATAR"
                            },
                            {
                              "value": "RE",
                              "displayValue": "RÉUNION"
                            },
                            {
                              "value": "RO",
                              "displayValue": "ROMANIA"
                            },
                            {
                              "value": "RU",
                              "displayValue": "RUSSIAN FEDERATION"
                            },
                            {
                              "value": "RW",
                              "displayValue": "RWANDA"
                            },
                            {
                              "value": "BL",
                              "displayValue": "SAINT BARTHÉLEMY"
                            },
                            {
                              "value": "SH",
                              "displayValue": "SAINT HELENA, ASCENSION AND TRISTAN DA CUNHA"
                            },
                            {
                              "value": "KN",
                              "displayValue": "SAINT KITTS AND NEVIS"
                            },
                            {
                              "value": "LC",
                              "displayValue": "SAINT LUCIA"
                            },
                            {
                              "value": "MF",
                              "displayValue": "SAINT MARTIN (FRENCH PART)"
                            },
                            {
                              "value": "PM",
                              "displayValue": "SAINT PIERRE AND MIQUELON"
                            },
                            {
                              "value": "VC",
                              "displayValue": "SAINT VINCENT AND THE GRENADINES"
                            },
                            {
                              "value": "WS",
                              "displayValue": "SAMOA"
                            },
                            {
                              "value": "SM",
                              "displayValue": "SAN MARINO"
                            },
                            {
                              "value": "ST",
                              "displayValue": "SAO TOME AND PRINCIPE"
                            },
                            {
                              "value": "SA",
                              "displayValue": "SAUDI ARABIA"
                            },
                            {
                              "value": "SN",
                              "displayValue": "SENEGAL"
                            },
                            {
                              "value": "RS",
                              "displayValue": "SERBIA"
                            },
                            {
                              "value": "SC",
                              "displayValue": "SEYCHELLES"
                            },
                            {
                              "value": "SL",
                              "displayValue": "SIERRA LEONE"
                            },
                            {
                              "value": "SG",
                              "displayValue": "SINGAPORE"
                            },
                            {
                              "value": "SX",
                              "displayValue": "SINT MAARTEN (DUTCH PART)"
                            },
                            {
                              "value": "SK",
                              "displayValue": "SLOVAKIA"
                            },
                            {
                              "value": "SI",
                              "displayValue": "SLOVENIA"
                            },
                            {
                              "value": "SB",
                              "displayValue": "SOLOMON ISLANDS"
                            },
                            {
                              "value": "SO",
                              "displayValue": "SOMALIA"
                            },
                            {
                              "value": "ZA",
                              "displayValue": "SOUTH AFRICA"
                            },
                            {
                              "value": "GS",
                              "displayValue": "SOUTH GEORGIA AND THE SOUTH SANDWICH ISLANDS"
                            },
                            {
                              "value": "SS",
                              "displayValue": "SOUTH SUDAN"
                            },
                            {
                              "value": "ES",
                              "displayValue": "SPAIN"
                            },
                            {
                              "value": "LK",
                              "displayValue": "SRI LANKA"
                            },
                            {
                              "value": "SD",
                              "displayValue": "SUDAN"
                            },
                            {
                              "value": "SR",
                              "displayValue": "SURINAME"
                            },
                            {
                              "value": "SJ",
                              "displayValue": "SVALBARD AND JAN MAYEN"
                            },
                            {
                              "value": "SZ",
                              "displayValue": "SWAZILAND"
                            },
                            {
                              "value": "SE",
                              "displayValue": "SWEDEN"
                            },
                            {
                              "value": "CH",
                              "displayValue": "SWITZERLAND"
                            },
                            {
                              "value": "SY",
                              "displayValue": "SYRIAN ARAB REPUBLIC"
                            },
                            {
                              "value": "TW",
                              "displayValue": "TAIWAN, PROVINCE OF CHINA"
                            },
                            {
                              "value": "TJ",
                              "displayValue": "TAJIKISTAN"
                            },
                            {
                              "value": "TZ",
                              "displayValue": "TANZANIA, UNITED REPUBLIC OF"
                            },
                            {
                              "value": "TH",
                              "displayValue": "THAILAND"
                            },
                            {
                              "value": "TL",
                              "displayValue": "TIMOR-LESTE"
                            },
                            {
                              "value": "TG",
                              "displayValue": "TOGO"
                            },
                            {
                              "value": "TK",
                              "displayValue": "TOKELAU"
                            },
                            {
                              "value": "TO",
                              "displayValue": "TONGA"
                            },
                            {
                              "value": "TT",
                              "displayValue": "TRINIDAD AND TOBAGO"
                            },
                            {
                              "value": "TN",
                              "displayValue": "TUNISIA"
                            },
                            {
                              "value": "TR",
                              "displayValue": "TURKEY"
                            },
                            {
                              "value": "TM",
                              "displayValue": "TURKMENISTAN"
                            },
                            {
                              "value": "TC",
                              "displayValue": "TURKS AND CAICOS ISLANDS"
                            },
                            {
                              "value": "TV",
                              "displayValue": "TUVALU"
                            },
                            {
                              "value": "UG",
                              "displayValue": "UGANDA"
                            },
                            {
                              "value": "UA",
                              "displayValue": "UKRAINE"
                            },
                            {
                              "value": "AE",
                              "displayValue": "UNITED ARAB EMIRATES"
                            },
                            {
                              "value": "GB",
                              "displayValue": "UNITED KINGDOM"
                            },
                            {
                              "value": "US",
                              "displayValue": "UNITED STATES"
                            },
                            {
                              "value": "UM",
                              "displayValue": "UNITED STATES MINOR OUTLYING ISLANDS"
                            },
                            {
                              "value": "UY",
                              "displayValue": "URUGUAY"
                            },
                            {
                              "value": "UZ",
                              "displayValue": "UZBEKISTAN"
                            },
                            {
                              "value": "VU",
                              "displayValue": "VANUATU"
                            },
                            {
                              "value": "VE",
                              "displayValue": "VENEZUELA, BOLIVARIAN REPUBLIC OF"
                            },
                            {
                              "value": "VN",
                              "displayValue": "VIET NAM"
                            },
                            {
                              "value": "VG",
                              "displayValue": "VIRGIN ISLANDS, BRITISH"
                            },
                            {
                              "value": "VI",
                              "displayValue": "VIRGIN ISLANDS, U.S."
                            },
                            {
                              "value": "WF",
                              "displayValue": "WALLIS AND FUTUNA"
                            },
                            {
                              "value": "EH",
                              "displayValue": "WESTERN SAHARA"
                            },
                            {
                              "value": "YE",
                              "displayValue": "YEMEN"
                            },
                            {
                              "value": "ZM",
                              "displayValue": "ZAMBIA"
                            },
                            {
                              "value": "ZW",
                              "displayValue": "ZIMBABWE"
                            }
                          ],
                          "simpleValueType": true,
                          "help": "Select the country this default consent state applies to"
                        },
                        "isUnique": true
                      },
                      {
                        "param": {
                          "type": "SELECT",
                          "name": "country_ad_storage",
                          "displayName": "ad_storage",
                          "macrosInSelect": false,
                          "selectItems": [
                            {
                              "value": "denied",
                              "displayValue": "Denied"
                            },
                            {
                              "value": "granted",
                              "displayValue": "Granted"
                            }
                          ],
                          "simpleValueType": true,
                          "help": "Maps to \"Advertising\" checkbox in GetTerms Cookie Widget",
                          "defaultValue": "denied"
                        },
                        "isUnique": false
                      },
                      {
                        "param": {
                          "type": "SELECT",
                          "name": "country_ad_user_data",
                          "displayName": "ad_user_data",
                          "macrosInSelect": false,
                          "selectItems": [
                            {
                              "value": "denied",
                              "displayValue": "Denied"
                            },
                            {
                              "value": "granted",
                              "displayValue": "Granted"
                            }
                          ],
                          "simpleValueType": true,
                          "defaultValue": "denied",
                          "help": "Maps to \"Advertising\" checkbox in GetTerms Cookie Widget"
                        },
                        "isUnique": false
                      },
                      {
                        "param": {
                          "type": "SELECT",
                          "name": "country_ad_personalization",
                          "displayName": "ad_personalization",
                          "macrosInSelect": false,
                          "selectItems": [
                            {
                              "value": "denied",
                              "displayValue": "Denied"
                            },
                            {
                              "value": "granted",
                              "displayValue": "Granted"
                            }
                          ],
                          "simpleValueType": true,
                          "defaultValue": "denied",
                          "help": "Maps to \"Advertising\" checkbox in GetTerms Cookie Widget"
                        },
                        "isUnique": false
                      },
                      {
                        "param": {
                          "type": "SELECT",
                          "name": "country_analytics_storage",
                          "displayName": "analytics_storage",
                          "macrosInSelect": false,
                          "selectItems": [
                            {
                              "value": "denied",
                              "displayValue": "Denied"
                            },
                            {
                              "value": "granted",
                              "displayValue": "Granted"
                            }
                          ],
                          "simpleValueType": true,
                          "defaultValue": "denied",
                          "help": "Maps to \"Performance\" checkbox in GetTerms Cookie Widget"
                        },
                        "isUnique": false
                      },
                      {
                        "param": {
                          "type": "SELECT",
                          "name": "country_functionality_storage",
                          "displayName": "functionality_storage",
                          "macrosInSelect": false,
                          "selectItems": [
                            {
                              "value": "denied",
                              "displayValue": "Denied"
                            },
                            {
                              "value": "granted",
                              "displayValue": "Granted"
                            }
                          ],
                          "simpleValueType": true,
                          "help": "Maps to \"Functional\" checkbox in GetTerms Cookie Widget",
                          "defaultValue": "denied"
                        },
                        "isUnique": false
                      },
                      {
                        "param": {
                          "type": "SELECT",
                          "name": "country_personalization_storage",
                          "displayName": "personalization_storage",
                          "macrosInSelect": false,
                          "selectItems": [
                            {
                              "value": "denied",
                              "displayValue": "Denied"
                            },
                            {
                              "value": "granted",
                              "displayValue": "Granted"
                            }
                          ],
                          "simpleValueType": true,
                          "help": "Maps to \"Functional\" checkbox in GetTerms Cookie Widget",
                          "defaultValue": "denied"
                        },
                        "isUnique": false
                      }
                    ],
                    "newRowButtonText": "New Country Override",
                    "newRowTitle": "New Country Default Consent Override",
                    "editRowTitle": "Edit Country Default Consent Override",
                    "displayName": "",
                    "help": ""
                  }
                ],
                "enablingConditions": [
                  {
                    "paramName": "country_overide_default_consent_settings",
                    "paramValue": true,
                    "type": "EQUALS"
                  }
                ],
                "help": "Use these settings to configure the consent defaults for a specific country. To set country-specific consent defaults, click \u0027New Country Override\u0027, select a country, and choose the default state for each storage type."
              }
            ]
          }
        ],
        "enablingConditions": [
          {
            "paramName": "control_consent_banner_gtm",
            "paramValue": true,
            "type": "EQUALS"
          }
        ],
        "help": "When enabled, these settings allow you to override the Global Default Consent State for specific countries / regions."
      },
      {
        "type": "GROUP",
        "name": "global_default_consent_settings",
        "groupStyle": "NO_ZIPPY",
        "subParams": [
          {
            "type": "SELECT",
            "name": "global_ad_storage",
            "displayName": "ad_storage",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "denied",
                "displayValue": "Denied"
              },
              {
                "value": "granted",
                "displayValue": "Granted"
              }
            ],
            "simpleValueType": true,
            "defaultValue": "denied",
            "help": "Maps to \"Advertising\" checkbox in GetTerms Cookie Widget"
          },
          {
            "type": "SELECT",
            "name": "global_ad_user_data",
            "displayName": "ad_user_data",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "denied",
                "displayValue": "Denied"
              },
              {
                "value": "granted",
                "displayValue": "Granted"
              }
            ],
            "simpleValueType": true,
            "defaultValue": "denied",
            "help": "Maps to \"Advertising\" checkbox in GetTerms Cookie Widget"
          },
          {
            "type": "SELECT",
            "name": "global_ad_personalization",
            "displayName": "ad_personalization",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "denied",
                "displayValue": "Denied"
              },
              {
                "value": "granted",
                "displayValue": "Granted"
              }
            ],
            "simpleValueType": true,
            "defaultValue": "denied",
            "help": "Maps to \"Advertising\" checkbox in GetTerms Cookie Widget"
          },
          {
            "type": "SELECT",
            "name": "global_analytics_storage",
            "displayName": "analytics_storage",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "denied",
                "displayValue": "Denied"
              },
              {
                "value": "granted",
                "displayValue": "Granted"
              }
            ],
            "simpleValueType": true,
            "defaultValue": "denied",
            "help": "Maps to \"Performance\" checkbox in GetTerms Cookie Widget"
          },
          {
            "type": "SELECT",
            "name": "global_functionality_storage",
            "displayName": "functionality_storage",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "denied",
                "displayValue": "Denied"
              },
              {
                "value": "granted",
                "displayValue": "Granted"
              }
            ],
            "simpleValueType": true,
            "defaultValue": "denied",
            "help": "Maps to \"Functional\" checkbox in GetTerms Cookie Widget"
          },
          {
            "type": "SELECT",
            "name": "global_personalization_storage",
            "displayName": "personalization_storage",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "denied",
                "displayValue": "Denied"
              },
              {
                "value": "granted",
                "displayValue": "Granted"
              }
            ],
            "simpleValueType": true,
            "defaultValue": "denied",
            "help": "Maps to \"Functional\" checkbox in GetTerms Cookie Widget"
          },
          {
            "type": "SELECT",
            "name": "global_security_storage",
            "displayName": "security_storage",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "denied",
                "displayValue": "Denied"
              },
              {
                "value": "granted",
                "displayValue": "Granted"
              }
            ],
            "simpleValueType": true,
            "defaultValue": "granted",
            "help": "Maps to \"Essential\" checkbox in GetTerms Cookie Widget"
          }
        ],
        "help": "\u003cstrong\u003eWe recommend not changing these settings.\u003c/strong\u003e\u003cbr\u003eThey serve as the default consent state when a region specific setting doesn\u0027t exist and a fallback if our banner fails to load. Setting all to denied (excluding essential security storage) will ensure global compliance.",
        "displayName": "Fallback / Global Default Consent State"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Import GTM template APIs
const injectScript = require('injectScript');
const queryPermission = require('queryPermission');
const localStorage = require('localStorage');
const gtagSet = require('gtagSet');
const setDefaultConsentState = require('setDefaultConsentState');
const updateConsentState = require('updateConsentState');
const log = require('logToConsole');
const JSON = require('JSON');
const copyFromDataLayer = require('copyFromDataLayer');
const copyFromWindow = require('copyFromWindow');

// Config
const gtmControlBannerConfig = data.control_consent_banner_gtm || false;
const countryDefaultSettingOverrides = data.country_overide_default_consent_settings || false;
const gtmInstallsWidget = data.install_widget_gtm || false;
const gdprDefaultSettingsOverride = data.gdpr_overide_default_consent_settings || false;
const autoLang = data.autoLang || false;
const lang = data.defaultLanguage || 'en-us';
const widgetSlug = data.widgetSlug || null;
const embedType = localStorage.getItem('getterms_init') || null;
const STORAGE_KEY = 'getterms_cookie_consent';

// --- Helper functions ---
function localStorageGetItem(key) {
  const cache = localStorage.getItem(key);
  if (!cache) return null;
  return JSON.parse(cache);
}

function onUserConsent(prefs) {
  const cookie_prefs = prefs.cookie_preferences;
  const consentModeStates = {
    ad_storage: cookie_prefs["Marketing"] ? "granted" : "denied",
    ad_user_data: cookie_prefs["Marketing"] ? "granted" : "denied",
    ad_personalization: cookie_prefs["Marketing"] ? "granted" : "denied",
    analytics_storage: cookie_prefs["Analytics"] ? "granted" : "denied",
    functionality_storage: cookie_prefs["Functional"] ? "granted" : "denied",
    personalization_storage: cookie_prefs["Functional"] ? "granted" : "denied",
    security_storage: cookie_prefs["Essential Cookies"] ? "granted" : "denied",
  };
  updateConsentState(consentModeStates);
  log('[Tag Manager] updating consent state: ', consentModeStates);
}

// --- Regional defaults ---
function getRegionalDefaultConsents() {
  if (!data.country_default_consent_settings || !data.country_default_consent_settings.length) {
    log('[Tag Manager] No regional defaults defined');
    return [];
  }

  return data.country_default_consent_settings.map(parseRegionConfig);
}

function parseRegionConfig(regionConfig) {
  var commandData = {};

  // Region Alpha2 code
  if (regionConfig.country_region) {
    commandData.region = [regionConfig.country_region];
  }

  // Map of consent keys in the GTM template
  var consentKeys = ['ad_storage', 'ad_personalization', 'ad_user_data', 'analytics_storage', 'functionality_storage', 'personalization_storage'];

  // Map each key to corresponding defaultConsent property
  for (var i = 0; i < consentKeys.length; i++) {
    var key = consentKeys[i];
    var prop = 'country_' + key;
    var value = regionConfig[prop];
    if (value === 'granted' || value === 'denied') {
      commandData[key] = value;
    }
  }

  // Wait for update (standard for GetTerms)
  commandData.wait_for_update = 2000;

  log('[Tag Manager] Parsed region config:', commandData);
  return commandData;
}

// --- Event handlers ---
function handleInitConsent() {
  log('[Tag Manager] Handling gtm.init_consent');

  // Apply regional defaults if GTM is controlling the consent banner and we are setting country defaults
  if (gtmControlBannerConfig && countryDefaultSettingOverrides) {
    // Tell the widget we are overriding region settings
    const regionalConsents = getRegionalDefaultConsents();
    log('[Tag Manager] Applying country default consent settings');
    regionalConsents.forEach(consentConfig => {
      setDefaultConsentState(consentConfig);
    });
  }

  // Apply GDPR defaults if GDPR override is enabled.
  if (gdprDefaultSettingsOverride) {
    log('[Tag Manager] Applying GDPR default consent settings');

    // Build list of country overrides to exclude from GDPR defaults
    const overrideCountriesAlpha = (data.country_default_consent_settings || [])
      .map(setting => setting.country_region);

    const gdprConsentConfig = {
      ad_storage: data.gdpr_ad_storage || 'denied',
      ad_user_data: data.gdpr_ad_user_data || 'denied',
      ad_personalization: data.gdpr_ad_personalization || 'denied',
      analytics_storage: data.gdpr_analytics_storage || 'denied',
      functionality_storage: data.gdpr_functionality_storage || 'granted',
      personalization_storage: data.gdpr_personalization_storage || 'denied',
      security_storage: data.gdpr_security_storage || 'granted',
    };

    // GDPR countries (EU + EEA)
    const gdprCountries = [ // EU
      'AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI', 'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU', 'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE', // EEA (non-EU)
      'IS', 'LI', 'NO',
    ];

    // Apply GDPR defaults to all GDPR countries except those with overrides
    for (var i = 0; i < gdprCountries.length; i++) {
      var countryCode = gdprCountries[i];
      if (overrideCountriesAlpha.indexOf(countryCode) === -1) {
        // Clone config manually since spread isn't supported
        var consentConfig = gdprConsentConfig;
        consentConfig.region = countryCode;
        setDefaultConsentState(consentConfig);
      }
    }
  }

  // --- Set the default global config ---
  const globalConsentConfig = {
    ad_storage: data.global_ad_storage || 'denied',
    ad_user_data: data.global_ad_user_data || 'denied',
    ad_personalization: data.global_ad_personalization || 'denied',
    analytics_storage: data.global_analytics_storage || 'denied',
    functionality_storage: data.global_functionality_storage || 'granted',
    personalization_storage: data.global_personalization_storage || 'denied',
    security_storage: data.global_security_storage || 'granted',
  };

  // --- Determine which defaults to apply ---
  let effectiveDefaults = globalConsentConfig;

  // --- Use dataLayer event if available ---
  const dl = copyFromWindow('GetTermsDefaults');

  if (embedType === 'ManualEmbed' && !gtmControlBannerConfig && dl) {
    log('[TAG MANAGER] Using GetTerms defaults from dataLayer:', dl);
    effectiveDefaults = dl;
  } else {
    log('[TAG MANAGER] Using GTM-controlled defaults:', globalConsentConfig);
  }

  // --- Apply the chosen defaults ---
  setDefaultConsentState(effectiveDefaults);
}

function handleUserPrefUpdate() {
  log('[Tag Manager] Handling user preference update');
  const prefs = localStorageGetItem(STORAGE_KEY);
  if (prefs) {
    onUserConsent(prefs);
    return true;
  }
  log('[Tag Manager] No user preferences found');
  return false;
}

// --- Main ---
function main() {
  log('[Tag Manager] Starting GetTerms CMP template');
  gtagSet('developer_id.dMjlhZj', true);

  // Widget communication
  if (gtmControlBannerConfig) {
    // Widget communication
    log('[Tag Manager] GTM Template overriding widget config.');
    localStorage.setItem('gtm_region_override', gtmControlBannerConfig);
  } else {
    log('[Tag Manager] GTM Template not overriding widget config.');
    localStorage.setItem('gtm_region_override', gtmControlBannerConfig);
  }

  // Inject widget script if allowed
  const url = widgetSlug && (!embedType || embedType === 'GTMTemplate' || gtmInstallsWidget) ? 'https://gettermscmp.com/cookie-consent/embed/' + widgetSlug + '/' + lang + (autoLang ? '?auto=true' : '') : null;

  if (url && queryPermission('inject_script', url)) {
    log('[Tag Manager] Injecting GetTerms script via GTM template');
    localStorage.setItem('getterms_init', 'GTMTemplate');

    injectScript(url, () => {
      log('[Tag Manager] GetTerms script loaded successfully.');
      data.gtmOnSuccess();
    }, () => {
      log('[Tag Manager] GetTerms script failed to load.');
      data.gtmOnFailure();
    });
  } else {
    log('[Tag Manager] Script injection skipped or not permitted');
  }

  // --- Event handling (sandbox-safe) ---
  const event = copyFromDataLayer('event'); // safe read

  if (event === 'gtm.init_consent') {
    handleInitConsent(data);
  } else if (event === 'userPrefUpdate') {
    handleUserPrefUpdate();
  } else {
    log('[Tag Manager] No specific handler for event: ' + event);
  }

  handleUserPrefUpdate();

  log('[Tag Manager] Event listeners registered. Template setup complete.');
}

// Run template
main();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "write_data_layer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keyPatterns",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "developer_id.dMjlhZj"
              },
              {
                "type": 1,
                "string": "getterms_init"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_consent",
        "versionId": "1"
      },
      "param": [
        {
          "key": "consentTypes",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_user_data"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_personalization"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "analytics_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "functionality_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "personalization_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "security_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_local_storage",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "getterms_cookie_consent"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "getterms_init"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "gtmRegionSettings"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "getterms_regional_settings"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "gtm_region_override"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://gettermscmp.com/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_data_layer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedKeys",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "GetTermsDefaults"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Untitled test 1
  code: |-
    const mockData = {
      // Mocked field values
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();


___NOTES___

Created on 17/04/2024, 08:53:38


